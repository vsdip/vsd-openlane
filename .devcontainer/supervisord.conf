[supervisord]
nodaemon=true
logfile=/var/log/supervisord.log
pidfile=/var/run/supervisord.pid

[program:xvfb]
command=/usr/bin/Xvfb :1 -screen 0 1280x800x24 -nolisten tcp -noreset
autostart=true
autorestart=true
priority=10
environment=DISPLAY=":1"

[program:x11vnc]
command=/usr/bin/x11vnc -display :1 -rfbport 5901 -forever -shared -nopw -xkb -quiet -listen 0.0.0.0
autostart=true
autorestart=true
priority=20
startsecs=2

[program:websockify]
command=/usr/bin/websockify 0.0.0.0:6080 localhost:5901 --web=/usr/share/novnc
autostart=true
autorestart=true
priority=30

[program:xfce4]
command=/bin/bash -lc "export DISPLAY=:1 && /usr/bin/startxfce4"
environment=DISPLAY=":1",HOME="/home/vscode",USER="vscode"
user=vscode
directory=/home/vscode
autostart=true
autorestart=true
priority=40
startsecs=3
